<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note Plus - Tema Destekli</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-bg: rgba(255, 255, 255, 0.15);
            --text-color: #ffffff;
            --accent-color: #00a8ff;
            --card-border: rgba(255, 255, 255, 0.2);
            --body-bg: linear-gradient(135deg, #1e3799, #0984e3);
        }

        /* TEMA SINIFLARI */
        body.theme-green { --body-bg: linear-gradient(135deg, #009432, #26de81); --accent-color: #20bf6b; }
        body.theme-purple { --body-bg: linear-gradient(135deg, #6c5ce7, #a29bfe); --accent-color: #8854d0; }
        body.theme-dark { --body-bg: linear-gradient(135deg, #1e272e, #2f3640); --accent-color: #57604f; --primary-bg: rgba(255,255,255,0.05); }

        body { 
            min-height: 100vh; margin: 0; font-family: 'Segoe UI', sans-serif;
            background: var(--body-bg); background-attachment: fixed; 
            color: var(--text-color); padding: 15px; display: flex; flex-direction: column; align-items: center; transition: 0.5s;
        }

        /* Tema SeÃ§ici Panel */
        .theme-selector {
            display: flex; gap: 10px; margin-bottom: 20px; background: var(--primary-bg);
            padding: 10px 20px; border-radius: 50px; backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
        }
        .theme-dot { width: 25px; height: 25px; border-radius: 50%; cursor: pointer; border: 2px solid white; transition: 0.3s; }
        .theme-dot:hover { transform: scale(1.2); }
        .dot-blue { background: #0984e3; }
        .dot-green { background: #26de81; }
        .dot-purple { background: #a29bfe; }
        .dot-dark { background: #2f3640; }

        /* Ãœst Bar */
        .top-bar {
            width: 95%; max-width: 1000px; background: var(--primary-bg);
            backdrop-filter: blur(15px); padding: 20px; border-radius: 20px;
            margin-bottom: 20px; display: flex; flex-direction: column; gap: 15px;
            border: 1px solid var(--card-border); align-items: center;
        }

        @media (min-width: 768px) {
            .top-bar { flex-direction: row; justify-content: space-between; }
        }

        .auth-inputs input { 
            background: rgba(255,255,255,0.1); border: 1px solid var(--card-border); 
            color: white; padding: 10px; border-radius: 12px; outline: none; width: 120px;
        }

        .btn { 
            background: var(--accent-color); color: white; border: none; 
            padding: 12px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }

        .input-section {
            width: 100%; max-width: 1000px; background: var(--primary-bg); backdrop-filter: blur(15px);
            padding: 20px; border-radius: 20px; border: 1px solid var(--card-border);
            margin-bottom: 25px; display: none; flex-direction: column; gap: 12px;
        }

        /* Not KartlarÄ± */
        .notes-grid { 
            display: grid; width: 100%; max-width: 1000px;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; 
        }

        .note-card {
            border-radius: 20px; border: 1px solid var(--card-border);
            padding: 18px; position: relative; backdrop-filter: blur(12px);
            transition: 0.3s; overflow: hidden;
        }

        .note-card img, .note-card video { width: 100%; border-radius: 12px; margin: 10px 0; max-height: 200px; object-fit: cover; }
        .delete-btn { position: absolute; top: 15px; right: 15px; color: #ff4757; cursor: pointer; display: none; padding: 5px; }
        .is-owner .delete-btn { display: block; }
    </style>
</head>
<body id="body-el">

    <div class="theme-selector">
        <span style="font-size: 0.8rem; margin-right: 5px;">Tema:</span>
        <div class="theme-dot dot-blue" onclick="setTheme('blue')"></div>
        <div class="theme-dot dot-green" onclick="setTheme('green')"></div>
        <div class="theme-dot dot-purple" onclick="setTheme('purple')"></div>
        <div class="theme-dot dot-dark" onclick="setTheme('dark')"></div>
    </div>

    <div class="top-bar">
        <h2 style="margin:0;">Note Plus <i class="fas fa-palette"></i></h2>
        <div id="logged-out-view" class="auth-inputs">
            <input type="text" id="username" placeholder="KullanÄ±cÄ±">
            <input type="password" id="password" placeholder="Åžifre">
            <button class="btn" onclick="handleAuth()">GiriÅŸ</button>
        </div>
        <div id="logged-in-view" style="display: none; gap: 10px; align-items: center;">
            <span id="user-display"></span>
            <button class="btn" style="background:#ff4757;" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
        </div>
    </div>

    <div class="input-section" id="input-section">
        <input type="text" id="note-title" placeholder="BaÅŸlÄ±k...">
        <textarea id="note-content" placeholder="Bir ÅŸeyler paylaÅŸ..." style="background:rgba(255,255,255,0.1); border:1px solid var(--card-border); border-radius:12px; padding:12px; color:white; outline:none; height:80px;"></textarea>
        
        <div style="display:flex; justify-content: space-between; align-items:center; flex-wrap:wrap; gap:10px;">
            <div style="display:flex; align-items:center; gap:10px;">
                <label style="font-size:12px">Kart Rengi:</label>
                <input type="color" id="color-input" value="#ffffff" style="width:30px; height:30px; border:none; background:none; cursor:pointer;">
                <label class="btn" style="background: rgba(255,255,255,0.1); font-size: 12px;">
                    <i class="fas fa-camera"></i> Medya
                    <input type="file" id="file-input" hidden accept="image/*,video/*" onchange="handleFile(this)">
                </label>
            </div>
            <button class="btn" onclick="addNote()">PaylaÅŸÄ±mÄ± GÃ¶nder</button>
        </div>
        <span id="file-info" style="font-size: 11px; opacity: 0.6;"></span>
    </div>

    <div class="notes-grid" id="notes-list"></div>

    <script>
        let currentUser = localStorage.getItem('np_active_user') || null;
        let tempMedia = { data: null, type: null };

        // --- TEMA SÄ°STEMÄ° ---
        function setTheme(theme) {
            const body = document.getElementById('body-el');
            body.className = ''; // TemalarÄ± temizle
            if(theme !== 'blue') body.classList.add('theme-' + theme);
            localStorage.setItem('np_theme', theme);
        }
        // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda temayÄ± hatÄ±rla
        const savedTheme = localStorage.getItem('np_theme');
        if(savedTheme) setTheme(savedTheme);

        // --- DÄ°ÄžER FONKSÄ°YONLAR ---
        function handleAuth() {
            const u = document.getElementById('username').value.trim();
            const p = document.getElementById('password').value.trim();
            if(!u || !p) return;
            let users = JSON.parse(localStorage.getItem('np_users')) || {};
            if(users[u] && users[u] !== p) return alert("HatalÄ± ÅŸifre!");
            users[u] = p;
            localStorage.setItem('np_users', JSON.stringify(users));
            localStorage.setItem('np_active_user', u);
            location.reload(); 
        }

        function logout() { localStorage.removeItem('np_active_user'); location.reload(); }

        function handleFile(input) {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                tempMedia.data = e.target.result;
                tempMedia.type = file.type.split('/')[0];
                document.getElementById('file-info').innerText = "Dosya Eklendi!";
            };
            reader.readAsDataURL(file);
        }

        function hexToRgba(hex, opacity) {
            let r = parseInt(hex.slice(1, 3), 16), g = parseInt(hex.slice(3, 5), 16), b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${opacity})`;
        }

        function addNote() {
            const title = document.getElementById('note-title').value;
            const content = document.getElementById('note-content').value;
            const color = document.getElementById('color-input').value;
            if(!title && !content && !tempMedia.data) return;
            let notes = JSON.parse(localStorage.getItem('np_notes')) || [];
            notes.unshift({
                id: Date.now(), owner: currentUser, title, content, color,
                media: {...tempMedia},
                date: new Date().toLocaleTimeString('tr-TR', {hour:'2-digit', minute:'2-digit'})
            });
            localStorage.setItem('np_notes', JSON.stringify(notes));
            location.reload();
        }

        function renderNotes() {
            const list = document.getElementById('notes-list');
            const notes = JSON.parse(localStorage.getItem('np_notes')) || [];
            list.innerHTML = '';
            notes.forEach(n => {
                const isOwner = n.owner === currentUser;
                const cardColor = hexToRgba(n.color || "#ffffff", 0.2);
                let mediaHtml = '';
                if(n.media && n.media.data) {
                    mediaHtml = n.media.type === 'image' ? `<img src="${n.media.data}">` : `<video src="${n.media.data}" controls></video>`;
                }
                list.innerHTML += `
                    <div class="note-card ${isOwner ? 'is-owner' : ''}" style="background: ${cardColor}">
                        <i class="fas fa-trash-alt delete-btn" onclick="deleteNote(${n.id})"></i>
                        <span style="font-size:10px; opacity:0.7">@${n.owner}</span>
                        <h3 style="margin:5px 0;">${n.title}</h3>
                        <p style="font-size:0.9rem; margin:0; opacity:0.9">${n.content}</p>
                        ${mediaHtml}
                    </div>
                `;
            });
        }

        function deleteNote(id) {
            let notes = JSON.parse(localStorage.getItem('np_notes')) || [];
            notes = notes.filter(n => n.id !== id);
            localStorage.setItem('np_notes', JSON.stringify(notes));
            renderNotes();
        }

        if(currentUser) {
            document.getElementById('logged-out-view').style.display = 'none';
            document.getElementById('logged-in-view').style.display = 'flex';
            document.getElementById('input-section').style.display = 'flex';
            document.getElementById('user-display').innerText = "ðŸ‘¤ " + currentUser;
        }
        renderNotes();
    </script>
    <h1>Made by Obur and Admin Obur</h1>
</body>
</html>